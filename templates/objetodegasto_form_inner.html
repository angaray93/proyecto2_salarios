{% load crispy_forms_tags %}
<form id="og_form" class="form-horizontal" method="post" action="{% url 'liquidacion:objetodegasto-add' %}">
    {% csrf_token %}
    {{ form.as_p }}
    <input type="submit" class="btn btn-primary" value="save" style="margin-bottom: 5px;" />
</form>
<button type="button" id="submitForm" class="btn btn-default">Guardar</button>
<input type="button" class="btn btn-default" data-dismiss="modal" value="Cerrar" />

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script>
    $(document).ready(function () {
            $('#og_form').on("submit", function(e) {
                e.preventDefault();
                $.ajax({
                 type: $(this).attr('method'),
                  url: $(this).attr('action'),
                 data: $(this).serialize(),
                 success: function (xhr, ajaxOptions, thrownError) {
                     console.log('ES SUCCESS');
                     console.log(xhr);
                     if ( $(xhr).find('.has-error').length > 0 ) {
                        $('#og_modal').find('.modal-body').html(xhr);
                        $('#og_modal').html(data);
				        $("#submitForm").remove();
                    } else {$('#og_modal').modal('toggle');
                    }
                },
                  error: function (xhr, ajaxOptions, thrownError) {
                     console.log('Entra al else');
                     // handle response errors here
                }
            });
        });
     $("#submitForm").on('click', function() {
		$("#og_form").submit();
	});
 });
    </script>
